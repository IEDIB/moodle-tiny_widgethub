{"version":3,"file":"contextmenus.min.js","sources":["../../src/extension/contextmenus.js"],"sourcesContent":["/* eslint-disable max-len */\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Tiny WidgetHub plugin.\n *\n * @module      tiny_ibwidgethub/plugin\n * @copyright   2024 Josep Mulet Pol <pep.mulet@gmail.com>\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport {registerMenuItemProvider} from \"../extension\";\nimport { getUserStorage } from \"../service/userstorage_service\";\nimport {convertInt, findVariableByName} from \"../util\";\nimport * as Action from './contextactions';\n\nconst SUPPORTED_LANGS = [\n    {iso: 'ca', title: 'Català'},\n    {iso: 'es', title: 'Castellà'},\n    {iso: 'en', title: 'English'},\n    {iso: 'fr', title: 'Francès'},\n    {iso: 'de', title: 'Alemany'},\n];\n\nconst AVAILABLE_EFFECTS = [\n    {name: 'zoom', title: 'Zoom'},\n    {name: 'lightbox', title: 'Pantalla completa'},\n];\n\nconst SUPPORTED_SIZES = [\n    {v: 'gran', l: 'Gran'},\n    {v: 'mitjana', l: 'Mitjana'},\n    {v: 'petita', l: 'Petita'},\n];\n\n/**\n * @typedef {{type: string, text: string, icon?: string, onAction: (api?: *) => void}} MenuItem\n * @typedef {{name: string, title: string, condition?: string | RegExp | (() => boolean), icon?: string, onAction?: ()=> void, subMenuItems?: () => (string | MenuItem[])}} UserDefinedItem\n */\n\n/**\n * @param {import(\"../contextinit\").ItemMenuContext} ctx\n * @returns {UserDefinedItem[]}\n **/\nfunction provider(ctx) {\n    /**\n     * @param {string} title\n     * @param {string} label\n     * @param {*} initialValue\n     * @param {(api: *) => void} onSubmit\n     */\n    const openInputDialog = function(title, label, initialValue, onSubmit) {\n        ctx.editor?.windowManager.open({\n            title,\n            body: {\n              type: 'panel',\n              items: [\n                {\n                  type: 'input',\n                  name: 'value',\n                  label: label\n                }\n              ]\n            },\n            buttons: [\n              {\n                type: 'submit',\n                text: 'Acceptar'\n              }\n            ],\n            initialData: {\n                value: initialValue\n            },\n            onSubmit\n        });\n    };\n\n    /**\n     * @type {UserDefinedItem}\n     */\n    const imageEffectsNestedMenu = {\n        name: 'imageEffects',\n        condition: 'imatge',\n        title: 'Efectes d\\'imatge',\n        subMenuItems: () => {\n            const elem = ctx.path?.elem;\n            if (!elem) {\n                return '';\n            }\n            if (!elem.attr('data-snptd')) {\n                return AVAILABLE_EFFECTS.map(e => ({\n                    type: 'menuitem',\n                    text: e.title,\n                    onAction: Action.addImageEffectAction.bind({ctx, type: e.name})\n                }));\n            } else {\n                return [{\n                    type: 'menuitem',\n                    icon: 'remove',\n                    text: 'Treure',\n                    onAction: Action.removeImageEffectsAction.bind({ctx})\n                }];\n            }\n        }\n    };\n\n    /**\n     * @type {UserDefinedItem}\n     */\n    const imageSwitchToSnippet = {\n        name: 'imageSwitchToSnippet',\n        condition: () => {\n           // We are not inside a widget image and the\n           // selectedElement right clicked must be a tag img\n           const key = ctx.path?.widget?.key;\n           const elem = ctx.path?.selectedElement;\n           const isImg = (\n                key !== undefined &&\n                key !== 'imatge' &&\n                key !== 'grid-imatge' &&\n                elem?.prop('tagName') === 'IMG' &&\n                // Do not take into account images in ib-card\n                !elem?.hasClass('card-img-top'));\n           if (ctx.path && isImg && elem?.[0]) {\n                ctx.path.targetElement = elem;\n           }\n           return isImg;\n        },\n        title: 'Convertir a snippet imatge',\n        onAction: Action.imageSwitchToSnippetAction.bind({ctx})\n    };\n\n    /**\n     * @type {UserDefinedItem}\n     */\n    const changeBoxLanguageNestedMenu = {\n        name: 'changeBoxLanguage',\n        condition: /capsa-.*|tasca-exercici/,\n        title: 'Idioma',\n        subMenuItems: () => {\n            const elem = ctx.path?.elem;\n            if (!elem) {\n                return '';\n            }\n            const currentLang = elem.attr('data-lang') ?? '';\n            return SUPPORTED_LANGS.map(({iso, title}) => ({\n                type: 'menuitem',\n                text: title,\n                icon: iso === currentLang ? 'checkmark' : undefined,\n                onAction: Action.changeBoxLangAction.bind({ctx, iso})\n            }));\n        }\n    };\n\n    /**\n     * @type {UserDefinedItem}\n     */\n    const changeBoxSizeNestedMenu = {\n        name: 'changeBoxSize',\n        condition: /^capsa-.*|^tasca-exercici$/,\n        title: 'Mida',\n        subMenuItems: () => {\n            const elem = ctx.path?.elem;\n            const widget = ctx.path?.widget;\n            if (!elem || !widget) {\n                return '';\n            }\n            const sizes = findVariableByName('mida', widget.parameters)?.options;\n            return (sizes || SUPPORTED_SIZES).map((/** @type {*}*/ e) => ({\n                type: 'menuitem',\n                text: e.l ?? e,\n                icon: elem.hasClass('iedib-capsa-' + (e.v ?? e)) ? 'checkmark' : undefined,\n                onAction: Action.changeBoxSizeAction.bind({ctx, size: e.v ?? e})\n            }));\n        }\n    };\n\n    /**\n     * @type {UserDefinedItem}\n     */\n    const changeBoxSeverityNestedMenu = {\n        name: 'changeBoxSeverity',\n        condition: 'capsa-generica',\n        title: 'Tipus',\n        subMenuItems: () => {\n            const elem = ctx.path?.elem;\n            const widget = ctx.path?.widget;\n            if (!elem || !widget) {\n                return '';\n            }\n            const severities = findVariableByName('severity', widget.parameters)?.options;\n            return (severities || []).map((/** @type {*}*/ e) => ({\n                type: 'menuitem',\n                text: e.l ?? e,\n                icon: elem.hasClass('iedib-' + (e.v ?? e) + '-border') ? 'checkmark' : undefined,\n                onAction: Action.changeBoxSeverityAction.bind({ctx, severity: e.v ?? e})\n            }));\n        }\n    };\n\n\n    /**\n     * @type {UserDefinedItem}\n     */\n    const twoColumnsNestedMenu = {\n        name: 'twoColumnsNestedMenu',\n        condition: 'two-cols',\n        title: 'Mida columnes',\n        subMenuItems: () => {\n            const elem = ctx.path?.elem;\n            const widget = ctx.path?.widget;\n            if (!elem || !widget) {\n                return '';\n            }\n            /** @type {*} */\n            const menuItems = [{\n                type: 'menuitem',\n                text: \"A una columna\",\n                onAction: Action.changeColumnWidth.bind({ctx, colSpan: 0})\n            }];\n\n            const firstSpan =\n            (elem.find(\"div:first-child\").attr('class')?.split(' ') ?? [])\n            .filter(c => c.startsWith('span')).map(c => c.replace('span', ''))[0];\n\n            for (let i = 2; i < 12; i = i + 2) {\n                const tpc = parseInt((100 * i / 12.0).toFixed(0));\n                const label = tpc + \"% | \" + (100 - tpc) + \"%\";\n                let isCurrent = firstSpan && convertInt(firstSpan, 0) == i;\n                menuItems.push({\n                    type: 'menuitem',\n                    text: label,\n                    icon: isCurrent ? 'checkmark' : undefined,\n                    onAction: Action.changeColumnWidth.bind({ctx, colSpan: i})\n                });\n            }\n            return menuItems;\n        }\n    };\n\n    /**\n     * @type {UserDefinedItem}\n     */\n    const switchBoxRowsExample = {\n        name: 'switchBoxRowsExample',\n        condition: 'capsa-exemple-cols',\n        title: 'Convertir a exemple 2 files',\n        onAction: Action.switchBoxRowsExampleAction.bind({ctx})\n    };\n\n    /**\n     * @type {UserDefinedItem}\n     */\n    const switchBoxSimpleExample = {\n        name: 'switchBoxSimpleExample',\n        condition: 'capsa-exemple-rows',\n        title: 'Convertir a exemple simple',\n        onAction: Action.switchBoxSimpleExampleAction.bind({ctx})\n    };\n\n    /**\n     * @type {UserDefinedItem}\n     */\n    const numberedListNestedMenu = {\n        name: 'numberedListNestedMenu',\n        condition: () => {\n            const selectedElement = ctx.path?.selectedElement;\n            // It must search an OL in the path, probably selectedElement is LI or so!!!!!\n            const target = selectedElement?.closest(\"ol\");\n            if (ctx.path && target?.[0]) {\n                ctx.path.targetElement = target;\n            }\n            return target?.[0] !== undefined;\n        },\n        icon: 'list-num-default',\n        title: 'Llista',\n        subMenuItems: () => {\n            // Determine if the class is there\n            const isBeauty = ctx.path?.targetElement?.hasClass('iedib-falist');\n            return [\n                {\n                    type: 'menuitem',\n                    text: 'Embellit',\n                    icon: isBeauty ? 'checkmark' : undefined,\n                    onAction: () => {\n                        // Toggle class\n                        const $target = ctx.path?.targetElement;\n                        if (!$target) {\n                            return;\n                        }\n                        $target.toggleClass('iedib-falist');\n                        // Make sure that start and style are in sync\n                        const startAt = $target.attr(\"start\") || \"1\";\n                        if ($target.hasClass('iedib-falist')) {\n                            const beginAt = parseInt(startAt);\n                            $target.css(\"counter-reset\", \"iedibfalist-counter \" + (beginAt - 1));\n                        } else {\n                            $target.css(\"counter-reset\", \"\");\n                        }\n                    }\n                },\n                {\n                    type: 'menuitem',\n                    text: 'Comença a',\n                    onAction: () => {\n                        // Get the start property of the list\n                        const startAt1 = ctx.path?.targetElement?.attr(\"start\") ?? \"1\";\n                        // Open input dialog, set the value and retrieve new value\n                        openInputDialog('Comença la numeració a ...', '', startAt1,\n                        (/** @type {*} */ api) => {\n                            // TODO: Opened issue: Closing a tiny dialog -- afects the main bootstap dialog\n                            api.close();\n                            const $target = ctx.path?.targetElement;\n                            if (!$target) {\n                                return;\n                            }\n                            // Change the number at which start\n                            const startAt2 = api.getData().value ?? \"1\";\n                            const beginAt3 = convertInt(startAt2, 1);\n                            $target.attr(\"start\", beginAt3);\n                            $target.css(\"counter-reset\", \"iedibfalist-counter \" + (beginAt3 - 1));\n                        });\n                    },\n                }\n            ];\n        }\n    };\n\n    /**\n     * @type {UserDefinedItem}\n     */\n   const accordionIndependentBehaviorNestedMenu = {\n        name: 'accordionIndependentBehavior',\n        condition: 'desplegable2',\n        title: 'Comportament',\n        subMenuItems: () => {\n            const $target = ctx.path?.elem;\n            if (!$target) {\n                return '';\n            }\n            // Is Accordion behavior?\n            const isDependentBehavior =\n            (\n                ($target.find(\"div.accordion-body\").attr(\"data-parent\") ||\n                 $target.find(\"div.accordion-body\").attr(\"data-bs-parent\")) ?? null) !== null;\n\n            return [false, true].map(opt => ({\n                type: 'menuitem',\n                text: opt ? 'Independents' : 'Dependents',\n                icon: isDependentBehavior === opt ? undefined : 'checkmark',\n                onAction: Action.setAccordionBehavior.bind({ctx, isDependentBehavior: opt})\n            }));\n        }\n    };\n\n\n    /**\n     * @type {UserDefinedItem}\n     */\n    const tablesMaxWidthMenu = {\n        name: 'tablesMaxWidthMenu',\n        condition: 'taula-predefinida,taula-bs',\n        title: 'Amplada taula',\n        onAction: () => {\n            const $target = ctx.path?.elem;\n            if (!$target) {\n                return;\n            }\n            // Get the initial width\n            const startAt1 = ($target.css(\"max-width\") || \"-1\")\n                .replace(\"px\", \"\").replace(\"none\", \"-1\");\n            // Open input dialog, set the value and retrieve new value\n            openInputDialog('Amplada màxima en (px)', '-1=sense limit', startAt1,\n            (/** @type {*} */ api) => {\n                const $target = ctx.path?.elem;\n                if (!$target) {\n                    return;\n                }\n                const maxwidth = convertInt(api.getData().value.replace(\"px\", \"\").trim(), 0);\n                if (maxwidth > 0) {\n                    $target.css(\"max-width\", maxwidth + \"px\");\n                } else {\n                    $target.css(\"max-width\", \"\");\n                }\n                api.close();\n            });\n        },\n    };\n\n    /**\n     * @type {UserDefinedItem}\n     */\n    const convertToBsTableMenu = {\n        name: 'convertToBsTableMenu',\n        condition: 'taula-predefinida',\n        title: 'Convertir a taula Bootstrap',\n        onAction: Action.convert2BootstrapTable.bind({ctx}),\n    };\n\n    /**\n     * @type {UserDefinedItem}\n     */\n    const convertToPredefinedTableMenu = {\n        name: 'convertToPredefinedTableMenu',\n        condition: 'taula-bs',\n        title: 'Convertir a taula predefinida',\n        onAction: Action.convert2PrefefinedTable.bind({ctx}),\n    };\n\n     /**\n     * @type {UserDefinedItem}\n     */\n     const responsivenessNestedMenu = {\n        name: 'responsivenessNestedMenu',\n        condition: 'taula-bs',\n        title: 'Responsivitat',\n        subMenuItems: () => {\n            const $target = ctx.path?.elem;\n            if (!$target) {\n                return '';\n            }\n            // Is responsiveness active\n            const isResponsive = $target.parent().hasClass('table-responsive');\n\n            return [{\n                type: 'menuitem',\n                text: isResponsive ? 'Treure' : 'Afegir',\n                onAction: Action.toggleBootstapTableResponsiveness.bind({ctx})\n            }];\n        }\n    };\n\n    /**\n     * @type {UserDefinedItem}\n     */\n    const tablesHeaderNestedMenu = {\n            name: 'tablesHeaderNestedMenu',\n            condition: 'taula-predefinida,taula-bs',\n            title: 'Capçalera',\n            subMenuItems: () => {\n                const $target = ctx.path?.elem;\n                if (!$target) {\n                    return '';\n                }\n                const hasHeader = $target.find('thead').length > 0;\n\n                return [{\n                    type: 'menuitem',\n                    text: hasHeader ? 'Treure' : 'Afegir',\n                    onAction: Action.toggleTableHeader.bind({ctx})\n                }];\n            }\n    };\n\n    /**\n     * @type {UserDefinedItem}\n     */\n    const tablesFooterNestedMenu = {\n        name: 'tablesFooterNestedMenu',\n        condition: 'taula-predefinida,taula-bs',\n        title: 'Peu de taula',\n        subMenuItems: () => {\n            const $target = ctx.path?.elem;\n            if (!$target) {\n                return '';\n            }\n            const hasFooter = $target.find('tfoot').length > 0;\n\n            return [{\n                type: 'menuitem',\n                text: hasFooter ? 'Treure' : 'Afegir',\n                onAction: Action.toggleTableFooter.bind({ctx})\n            }];\n        }\n    };\n\n     /**\n     * @type {UserDefinedItem}\n     */\n     const convertDropdownToList = {\n        name: 'convertDropdownToList',\n        condition: 'desplegable2',\n        title: 'Convertir a llista',\n        onAction: Action.convertDropdownToList.bind({ctx}),\n    };\n\n    /**\n     *\n     * @param {import(\"../plugin\").TinyMCE} editor\n     * @param {(color: string) => void} cbAccept\n     */\n     function colorPicker(editor, cbAccept) {\n        // Get last value from localStorage or white\n        const storageSrv = getUserStorage(editor);\n        const iniValue = storageSrv.getFromLocal('pickercolor', '#FFFFFF');\n        /** @type {HTMLElement | null | undefined} */\n        let container;\n        /** @type {(e: any) => void | null | undefined} */\n        let handleClick;\n\n        editor.windowManager.open({\n            title: 'Tria un color',\n            body: {\n                type: 'panel',\n                items: [\n                {\n                    type: 'htmlpanel',\n                    html: `<input type=\"color\" id=\"tiny_ibwidgethub_colorinput\" value=\"${iniValue}\" style=\"width:100%; height:50px;\" />\n                    <div id=\"tiny_ibwidgethub_preset-colors\" style=\"margin: 8px;\">\n                        <button type=\"button\" data-color=\"#BFEDD2\" style=\"background:#BFEDD2; width:24px; height:24px; border:none; margin-right:4px;\"></button>\n                        <button type=\"button\" data-color=\"#FBEEB8\" style=\"background:#FBEEB8; width:24px; height:24px; border:none; margin-right:4px;\"></button>\n                        <button type=\"button\" data-color=\"#F8CAC6\" style=\"background:#F8CAC6; width:24px; height:24px; border:none; margin-right:4px\"></button>\n                        <button type=\"button\" data-color=\"#ECCAFA\" style=\"background:#ECCAFA; width:24px; height:24px; border:none; margin-right:4px;\"></button>\n                        <button type=\"button\" data-color=\"#C2E0F4\" style=\"background:#C2E0F4; width:24px; height:24px; border:none; margin-right:4px;\"></button>\n                        <button type=\"button\" data-color=\"#ECF0F1\" style=\"background:#ECF0F1; width:24px; height:24px; border:none; margin-right:4px\"></button>\n                        <button type=\"button\" data-color=\"#CED4D9\" style=\"background:#CED4D9; width:24px; height:24px; border:none;\"></button>\n                    </div>`\n                }\n                ]\n            },\n            buttons: [\n                {\n                type: 'cancel',\n                text: 'Cancel·la'\n                },\n                {\n                type: 'submit',\n                text: 'Aplica',\n                primary: true\n                }\n            ],\n            onSubmit: (/** @type{*} **/ api) => {\n                /** @type {any} */\n                const control = document.getElementById('tiny_ibwidgethub_colorinput');\n                if (control?.value) {\n                   cbAccept?.(control.value);\n                   storageSrv.setToLocal('pickercolor', control.value, true);\n                }\n                api.close();\n                if (container && handleClick) {\n                    container.removeEventListener('click', handleClick);\n                }\n            }\n        });\n\n        // Afegeix el codi fora del `open`, amb `setTimeout` perquè el DOM estigui preparat\n        setTimeout(() => {\n            container = document.getElementById('tiny_ibwidgethub_preset-colors');\n            if (container) {\n                handleClick = (/** @type {*} */ e) => {\n                     const target = e.target.closest('button');\n                     if (target) {\n                        const color = target.dataset.color;\n                        /** @type{any} */\n                        const input = document.getElementById('tiny_ibwidgethub_colorinput');\n                        if (input) {\n                             input.value = color;\n                        }\n                     }\n                };\n                container.addEventListener('click', handleClick);\n            }\n        }, 300);\n    }\n\n    /**\n     * @type {UserDefinedItem}\n     */\n    const tablesCellColorNestedMenu = {\n        name: 'tablesCellColorNestedMenu',\n        condition: () => {\n            const target = ctx.path?.selectedElement?.closest(\"table\");\n            return target?.[0] !== undefined;\n        },\n        title: 'Cel·la',\n        subMenuItems: () => {\n            const $cell = ctx.path?.selectedElement?.closest('td, th');\n            if (!$cell) {\n                return '';\n            }\n            const menus = [\n                {\n                    type: 'menuitem',\n                    text: 'Triar fons',\n                    onAction: () => {\n                        colorPicker(ctx.editor,\n                            (/** @type {string} */ color) => {\n                                $cell.css('background-color', color);\n                            }\n                        );\n                    }\n                }\n            ];\n\n            if ($cell[0].style.backgroundColor) {\n                menus.push({\n                    type: 'menuitem',\n                    text: 'Eliminar fons',\n                    onAction: () => {\n                        $cell.css('background-color', '');\n                    }\n                });\n            }\n\n            return menus;\n        }\n    };\n\n\n    /**\n     * @type {UserDefinedItem}\n     */\n    const tablesRowColorNestedMenu = {\n        name: 'tablesRowColorNestedMenu',\n        condition: () => {\n            const target = ctx.path?.selectedElement?.closest(\"table\");\n            return target?.[0] !== undefined;\n        },\n        title: 'Fila',\n        subMenuItems: () => {\n            const $row = ctx.path?.selectedElement?.closest('tr');\n            if (!$row) {\n                return '';\n            }\n            const menus = [\n                {\n                    type: 'menuitem',\n                    text: 'Triar fons',\n                     onAction: () => {\n                        colorPicker(ctx.editor,\n                            (/** @type {string} */ color) => {\n                                $row.css('background-color', color);\n                            }\n                        );\n                    }\n                }\n            ];\n            if ($row[0].style.backgroundColor) {\n                menus.push({\n                    type: 'menuitem',\n                    text: 'Eliminar fons',\n                    onAction: () => {\n                        $row.css('background-color', '');\n                    }\n                });\n            }\n            return menus;\n        }\n    };\n\n    return [\n        // Image actions\n        imageEffectsNestedMenu,\n        imageSwitchToSnippet,\n\n        // Box actions\n        changeBoxLanguageNestedMenu,\n        changeBoxSizeNestedMenu,\n        changeBoxSeverityNestedMenu,\n        switchBoxRowsExample,\n        switchBoxSimpleExample,\n\n        // Others\n        accordionIndependentBehaviorNestedMenu,\n        numberedListNestedMenu,\n        twoColumnsNestedMenu,\n        convertDropdownToList,\n\n        // Tables\n        tablesMaxWidthMenu,\n        convertToBsTableMenu,\n        convertToPredefinedTableMenu,\n        responsivenessNestedMenu,\n        tablesHeaderNestedMenu,\n        tablesFooterNestedMenu,\n        tablesCellColorNestedMenu,\n        tablesRowColorNestedMenu,\n    ];\n}\n\nregisterMenuItemProvider(provider);"],"names":["SUPPORTED_LANGS","iso","title","AVAILABLE_EFFECTS","name","SUPPORTED_SIZES","v","l","ctx","openInputDialog","label","initialValue","onSubmit","editor","windowManager","open","body","type","items","buttons","text","initialData","value","imageEffectsNestedMenu","condition","subMenuItems","elem","path","_ctx$path","attr","icon","onAction","Action","removeImageEffectsAction","bind","map","e","addImageEffectAction","imageSwitchToSnippet","key","_ctx$path2","widget","_ctx$path2$widget","_ctx$path3","selectedElement","isImg","undefined","prop","hasClass","targetElement","imageSwitchToSnippetAction","changeBoxLanguageNestedMenu","_ctx$path4","currentLang","_ref","changeBoxLangAction","changeBoxSizeNestedMenu","_ctx$path5","_ctx$path6","parameters","_findVariableByName","options","changeBoxSizeAction","size","changeBoxSeverityNestedMenu","_ctx$path7","_ctx$path8","_findVariableByName2","changeBoxSeverityAction","severity","twoColumnsNestedMenu","_ctx$path9","_ctx$path10","menuItems","changeColumnWidth","colSpan","firstSpan","find","split","filter","c","startsWith","replace","i","tpc","parseInt","toFixed","isCurrent","push","switchBoxRowsExample","switchBoxRowsExampleAction","switchBoxSimpleExample","switchBoxSimpleExampleAction","numberedListNestedMenu","_ctx$path11","target","closest","_ctx$path12","_ctx$path12$targetEle","$target","_ctx$path13","toggleClass","startAt","beginAt","css","startAt1","api","close","_ctx$path15","startAt2","getData","beginAt3","accordionIndependentBehaviorNestedMenu","_ctx$path16","isDependentBehavior","opt","setAccordionBehavior","tablesMaxWidthMenu","_ctx$path17","_ctx$path18","maxwidth","trim","convertToBsTableMenu","convert2BootstrapTable","convertToPredefinedTableMenu","convert2PrefefinedTable","responsivenessNestedMenu","_ctx$path19","parent","toggleBootstapTableResponsiveness","tablesHeaderNestedMenu","_ctx$path20","length","toggleTableHeader","tablesFooterNestedMenu","_ctx$path21","toggleTableFooter","colorPicker","cbAccept","storageSrv","iniValue","getFromLocal","container","handleClick","html","primary","control","document","getElementById","setToLocal","removeEventListener","setTimeout","color","dataset","input","addEventListener","convertDropdownToList","_ctx$path22","_ctx$path22$selectedE","$cell","_ctx$path23","_ctx$path23$selectedE","menus","style","backgroundColor","_ctx$path24","_ctx$path24$selectedE","$row","_ctx$path25","_ctx$path25$selectedE"],"mappings":"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"}