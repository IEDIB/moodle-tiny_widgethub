{"version":3,"file":"contextactions.min.js","sources":["../../src/extension/contextactions.js"],"sourcesContent":["\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Tiny WidgetHub plugin.\n *\n * @module      tiny_ibwidgethub/plugin\n * @copyright   2024 Josep Mulet Pol <pep.mulet@gmail.com>\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport {addRequires, cleanUnusedRequires} from './dependencies';\nimport jQuery from 'jquery';\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext, type: string}}}\n */\nexport function addImageEffectAction() {\n    const ctx = this.ctx;\n    const type = this.type;\n    const elem = ctx.path?.elem;\n    if (!elem) {\n        return;\n    }\n    elem.attr(\"data-snptd\", type);\n    addRequires(ctx.editor, [\"/sd/images.min.js\"]);\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext}}}\n */\nexport function removeImageEffectsAction() {\n    const ctx = this.ctx;\n    const elem = ctx.path?.elem;\n    if (!elem) {\n        return;\n    }\n    elem.removeAttr(\"data-snptd\");\n    if (elem.attr(\"role\")?.startsWith(\"snptd_\")) {\n        elem.removeAttr(\"role\");\n    }\n    cleanUnusedRequires(ctx.editor);\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext, iso: string}}\n */\nexport function changeBoxLangAction() {\n    const iso = this.iso;\n    const elem = this.ctx.path?.elem;\n    const widget = this.ctx.path?.widget;\n    if (!elem || !widget) {\n        return;\n    }\n    const $lateral = elem.find('.iedib-titolLateral');\n    const isTascaExercici = elem.attr('data-proposat') !== undefined ||\n        elem.find('.iedib-tasca.iedib-central').length > 0;\n\n    let theType;\n    let langKey = \"msg\";\n    if (isTascaExercici) {\n        if (elem.find('.iedib-tasca.iedib-proposat').length) {\n            langKey = \"msg_epr\";\n        } else {\n            // Must see if it is tava or tapr\n            langKey = \"msg_\" + (elem.attr('data-proposat') ?? \"tapr\");\n        }\n    } else if (widget.key === 'capsa-generica') {\n        [\"alerta\", \"ampliacio\", \"consell\", \"important\", \"introduccio\"].forEach((ty) => {\n            if (elem.hasClass(\"iedib-\" + ty + \"-border\")) {\n                theType = ty;\n            }\n        });\n        langKey = \"msg_\" + theType;\n    }\n    const I18n = widget.I18n;\n    if (I18n?.[langKey]?.[iso]) {\n        if (isTascaExercici) {\n            const h4 = elem.find('.iedib-central h4').first();\n            h4.html(I18n[langKey][iso] + \":\");\n        } else {\n            $lateral.html(I18n[langKey][iso]);\n            $lateral.append('<span class=\"iedib-' + theType + '-logo\"></span>');\n        }\n    }\n    // Replace data-lang\n    elem.attr('data-lang', iso);\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext, size: string}}\n */\nexport function changeBoxSizeAction() {\n    const elem = this.ctx.path?.elem;\n    const widget = this.ctx.path?.widget;\n    if (!elem || !widget) {\n        return;\n    }\n    elem.removeClass(\"iedib-capsa-petita iedib-capsa-mitjana iedib-capsa-gran\");\n    elem.addClass(\"iedib-capsa-\" + this.size);\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext, severity: string}}\n */\nexport function changeBoxSeverityAction() {\n    const severity = this.severity;\n    const elem = this.ctx.path?.elem;\n    const widget = this.ctx.path?.widget;\n    if (!elem || !widget) {\n        return;\n    }\n    elem.removeClass(\n        \"iedib-alerta-border iedib-important-border iedib-consell-border iedib-introduccio-border iedib-ampliacio-border\");\n    elem.addClass(\"iedib-\" + severity + \"-border\");\n    const $lateral = elem.find(\".iedib-lateral\");\n    $lateral.removeClass(\"iedib-alerta iedib-important iedib-consell iedib-introduccio iedib-ampliacio\");\n    $lateral.addClass(\"iedib-\" + severity);\n    const lang = elem.attr(\"data-lang\") || \"ca\";\n    let langKey = \"msg_\" + severity;\n    // Change the lateral title\n    if (widget.I18n?.[langKey]?.[lang]) {\n        $lateral.find('.iedib-titolLateral')\n            .html(widget.I18n[langKey][lang]);\n    }\n\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext}}\n */\nexport function switchBoxSimpleExampleAction() {\n    const $target = this.ctx.path?.elem;\n    const widget = this.ctx.path?.widget;\n    if (!$target || !widget) {\n        return;\n    }\n    const lang = $target.attr(\"data-lang\") || \"ca\";\n    const solLabel = widget.I18n?.sol?.[lang] ?? 'Solució';\n    const formulacio = $target.find(\"div.iedib-formulacio-rows > *\").clone();\n    const resolucio = $target.find(\"div.iedib-resolucio-rows >  *\").clone();\n    const lateral = $target.find(\"p.iedib-titolLateral\").html();\n    const newSnpt = jQuery('<div class=\"iedib-capsa iedib-capsa-gran iedib-exemple-border\" data-lang=\"' + lang + '\">' +\n        '<div class=\"iedib-lateral iedib-exemple\">' +\n        '<p class=\"iedib-titolLateral\">' + lateral + '</span></p>' +\n        '</div>' +\n        '<div class=\"iedib-central\">' +\n        // Formulacio\n        // Resolució\n        '<br></div></div>');\n    const central = newSnpt.find('div.iedib-central');\n    central.append(formulacio);\n    if (resolucio.find('div.accordion').length === 0) {\n        central.append(\"<p><b>\" + solLabel + \"</b>:</p>\");\n    }\n    central.append(resolucio);\n    $target.replaceWith(newSnpt);\n\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext}}\n */\nexport function switchBoxRowsExampleAction() {\n    const $target = this.ctx.path?.elem;\n    if (!$target) {\n        return;\n    }\n    const lang = $target.attr(\"data-lang\") || \"ca\";\n    const lateral = $target.find(\"p.iedib-titolLateral\").html();\n    const formulacio = $target.find(\"div.span4.iedib-formulacio > *\");\n    const resolucio = $target.find(\"div.span8.iedib-resolucio > div.iedib-central > *\");\n    const newSnpt = jQuery('<div class=\"iedib-capsa iedib-capsa-gran iedib-exemple-border\" data-lang=\"' + lang + '\">' +\n        '<div class=\"iedib-lateral iedib-exemple\">' +\n        '<p class=\"iedib-titolLateral\">' + lateral + '</p>' +\n        '</div>' +\n        '<div class=\"iedib-formulacio-rows\">' +\n        // Add formulació\n        '</div>' +\n        '<div class=\"iedib-resolucio-rows\">' +\n        // Add resolució\n        '</div></div>');\n\n    newSnpt.find('div.iedib-formulacio-rows').append(formulacio);\n    newSnpt.find('div.iedib-resolucio-rows').append(resolucio);\n    $target.replaceWith(newSnpt);\n\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext}}\n */\nexport function imageSwitchToSnippetAction() {\n    const $target = this.ctx.path?.targetElement;\n    if (!$target) {\n        return;\n    }\n    const $snpt = jQuery('<div class=\"iedib-figura iedib-grid-responsive\"></div');\n    $snpt.append($target.clone());\n    // eslint-disable-next-line max-len\n    $snpt.append(jQuery('<p class=\"iedib-img-footer\"><span class=\"iedib-caption-counter\">Imatge:</span> <span class=\"iedib-caption-title\">Descripció</span></p>'));\n    $target.replaceWith($snpt);\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext, colSpan: number}}\n */\nexport function changeColumnWidth() {\n    const colSpan = this.colSpan;\n    const $target = this.ctx.path?.elem;\n    if (!$target) {\n        return;\n    }\n    if (colSpan <= 0 || colSpan > 12) {\n        // Set to one column flow\n        const columns = $target.find(\"div\");\n        columns.removeClass();\n        $target.replaceWith(columns);\n    } else {\n        // Define the spans\n        const first = $target.find(\"div:first-child\");\n        const last = $target.find(\"div:last-child\");\n        first.removeClass();\n        last.removeClass();\n        first.addClass(\"span\" + colSpan);\n        last.addClass(\"span\" + (12 - colSpan));\n    }\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext, isDependentBehavior: boolean}}\n */\nexport function setAccordionBehavior() {\n    const isDependentBehavior = this.isDependentBehavior;\n    const $target = this.ctx.path?.elem;\n    if (!$target) {\n        return;\n    }\n    if (isDependentBehavior) {\n        // Behavior individual\n        $target.find(\"div.accordion-body\").removeAttr(\"data-parent data-bs-parent\");\n    } else {\n        // Behavior accordion\n        const acid = $target.attr(\"id\");\n        $target.find(\"div.accordion-body\")\n            .attr(\"data-parent\", \"#\" + acid)\n            .attr(\"data-bs-parent\", \"#\" + acid);\n    }\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext}}\n */\nexport function convert2BootstrapTable() {\n    const $target = this.ctx.path?.elem;\n    if (!$target) {\n        return;\n    }\n    $target.removeClass(\"iedib-table\").removeAttr('style').removeAttr('border')\n           .addClass(\"table table-striped iedib-bstable\");\n    $target.find(\"td,th\").removeAttr(\"style\");\n    $target.find(\"thead > tr > th\").attr(\"role\", \"col\");\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext}}\n */\nexport function convertDropdownToList() {\n    const $target = this.ctx.path?.elem;\n    if (!$target) {\n        return;\n    }\n    // Convert into a list\n    const listSubstitute = this.ctx.jQuery(\"<ul></ul>\");\n    $target.find(\"a.accordion-toggle\").each((i, a) => {\n          const $e = $target.find(a.getAttribute(\"href\") || \"\");\n          $e.detach();\n          $e.removeClass();\n          const theLi = this.ctx.jQuery(\"<li></li>\");\n          theLi.append(a.innerHTML);\n          theLi.append($e);\n          listSubstitute.append(theLi);\n    });\n    $target.replaceWith(listSubstitute);\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext}}\n */\nexport function convert2PrefefinedTable() {\n    const $target = this.ctx.path?.elem;\n    if (!$target) {\n        return;\n    }\n    $target.removeClass(\"table table-bordered table-hover table-striped table-responsive iedib-bstable\");\n    $target.addClass(\"iedib-table\");\n    $target.attr(\"style\", 'table-layout:fixed; border-collapse:collapse; border-spacing:0px; width:96%;');\n    $target.find(\"td,th\").css(\"border\", '1px solid gray');\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext}}\n */\nexport function toggleTableHeader() {\n    const $target = this.ctx.path?.elem;\n    if (!$target) {\n        return;\n    }\n    let head = $target.find(\"thead\");\n    if (head.length) {\n        head.remove();\n    } else {\n        const jQuery = this.ctx.jQuery;\n        head = jQuery(\"<thead></thead>\");\n        const tr = jQuery(\"<tr></tr>\");\n        $target.find(\"tr\").first().find(\"td\").each(function() {\n            const newTh = jQuery('<th role=\"col\">Títol</th>');\n            const st = jQuery(this).attr(\"style\");\n            newTh.attr(\"style\", st ? st : \"\");\n            tr.append(newTh);\n        });\n        head.append(tr);\n        $target.prepend(head);\n    }\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext}}\n */\nexport function toggleTableFooter() {\n    const $target = this.ctx.path?.elem;\n    if (!$target) {\n        return;\n    }\n    let foot = $target.find(\"tfoot\");\n    if (foot.length) {\n        foot.remove();\n    } else {\n        const jQuery = this.ctx.jQuery;\n        foot = jQuery(\"<tfoot></tfoot>\");\n        const tr2 = jQuery(\"<tr></tr>\");\n        $target.find(\"tbody tr\").first().find(\"td\").each(\n        /**\n         * @this {HTMLElement}\n         */\n        function() {\n            const newTd = jQuery(\"<td>Resum</td>\");\n            const st = jQuery(this).attr(\"style\");\n            newTd.attr(\"style\", st ? st : \"\");\n            tr2.append(newTd);\n        });\n        foot.append(tr2);\n        $target.append(foot);\n    }\n}\n\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext}}\n */\nexport function toggleBootstapTableResponsiveness() {\n    const $target = this.ctx.path?.elem;\n    if (!$target) {\n        return;\n    }\n\n    if ($target.parent().hasClass(\"table-responsive\")) {\n        // Delete responsiveness\n        $target.parent().replaceWith($target);\n    } else {\n        // Add responsiveness\n        const $div = this.ctx.jQuery('<div class=\"table-responsive\"></div>');\n        $target.replaceWith($div);\n        $div.append($target);\n    }\n}"],"names":["ctx","this","type","elem","path","_ctx$path","attr","editor","iso","_this$ctx$path","widget","_this$ctx$path2","$lateral","find","isTascaExercici","undefined","length","theType","langKey","key","forEach","ty","hasClass","I18n","_I18n$langKey","first","html","append","severity","_this$ctx$path5","_this$ctx$path6","removeClass","addClass","lang","_widget$I18n","_widget$I18n$langKey","_this$ctx$path3","_this$ctx$path4","size","colSpan","$target","_this$ctx$path11","columns","replaceWith","last","_this$ctx$path13","removeAttr","_this$ctx$path15","css","_this$ctx$path14","listSubstitute","jQuery","each","i","a","$e","getAttribute","detach","theLi","innerHTML","_this$ctx$path10","targetElement","$snpt","clone","_ctx$path2","_elem$attr","startsWith","isDependentBehavior","_this$ctx$path12","acid","_this$ctx$path9","lateral","formulacio","resolucio","newSnpt","_this$ctx$path7","_this$ctx$path8","solLabel","sol","central","_this$ctx$path18","parent","$div","_this$ctx$path17","foot","remove","tr2","newTd","st","_this$ctx$path16","head","tr","newTh","prepend"],"mappings":"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"}