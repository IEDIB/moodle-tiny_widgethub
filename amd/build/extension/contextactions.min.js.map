{"version":3,"file":"contextactions.min.js","sources":["../../src/extension/contextactions.js"],"sourcesContent":["\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Tiny WidgetHub plugin.\n *\n * @module      tiny_ibwidgethub/plugin\n * @copyright   2024 Josep Mulet Pol <pep.mulet@gmail.com>\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport {htmlToElement, setStyleMCE} from '../util';\nimport {addRequires, cleanUnusedRequires} from './dependencies';\n\n/**\n * @param {Node} el\n * @returns\n */\nfunction detachNode(el) {\n  if (el && el.parentNode) {\n    el.parentNode.removeChild(el);\n  }\n  return el;\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext, type: string}}}\n */\nexport function addImageEffectAction() {\n    const ctx = this.ctx;\n    const type = this.type;\n    const elem = ctx.path?.elem;\n    if (!elem) {\n        return;\n    }\n    elem.setAttribute(\"data-snptd\", type);\n    addRequires(ctx.editor, [\"/sd/images.min.js\"]);\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext}}}\n */\nexport function removeImageEffectsAction() {\n    const ctx = this.ctx;\n    const elem = ctx.path?.elem;\n    if (!elem) {\n        return;\n    }\n    elem.removeAttribute(\"data-snptd\");\n    if (elem.getAttribute(\"role\")?.startsWith(\"snptd_\")) {\n        elem.removeAttribute(\"role\");\n    }\n    cleanUnusedRequires(ctx.editor);\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext, iso: string}}\n */\nexport function changeBoxLangAction() {\n    const iso = this.iso;\n    const elem = this.ctx.path?.elem;\n    const widget = this.ctx.path?.widget;\n    if (!elem || !widget) {\n        return;\n    }\n    const lateral = elem.querySelector('.iedib-titolLateral');\n    const isTascaExercici = elem.getAttribute('data-proposat') ||\n        elem.querySelector('.iedib-tasca.iedib-central');\n\n    let theType;\n    let langKey = \"msg\";\n    if (isTascaExercici) {\n        if (elem.querySelector('.iedib-tasca.iedib-proposat')) {\n            langKey = \"msg_epr\";\n        } else {\n            // Must see if it is tava or tapr\n            langKey = \"msg_\" + (elem.getAttribute('data-proposat') ?? \"tapr\");\n        }\n    } else if (widget.key === 'capsa-generica') {\n        [\"alerta\", \"ampliacio\", \"consell\", \"important\", \"introduccio\"].forEach((ty) => {\n            if (elem.classList.contains(\"iedib-\" + ty + \"-border\")) {\n                theType = ty;\n            }\n        });\n        langKey = \"msg_\" + theType;\n    }\n    const I18n = widget.I18n;\n    if (I18n?.[langKey]?.[iso]) {\n        if (isTascaExercici) {\n            const h4 = elem.querySelector('.iedib-central h4');\n            if (h4) {\n                h4.innerHTML = (I18n[langKey][iso] + \":\");\n            }\n        } else if (lateral) {\n            lateral.innerHTML = I18n[langKey][iso];\n            if (theType) {\n                lateral.append('<span class=\"iedib-' + theType + '-logo\"></span>');\n            }\n        }\n    }\n    // Replace data-lang\n    elem.setAttribute('data-lang', iso);\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext, size: string}}\n */\nexport function changeBoxSizeAction() {\n    const elem = this.ctx.path?.elem;\n    const widget = this.ctx.path?.widget;\n    if (!elem || !widget) {\n        return;\n    }\n    elem.classList.remove(\"iedib-capsa-petita\", \"iedib-capsa-mitjana\", \"iedib-capsa-gran\");\n    elem.classList.add(\"iedib-capsa-\" + this.size);\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext, severity: string}}\n */\nexport function changeBoxSeverityAction() {\n    const severity = this.severity;\n    const elem = this.ctx.path?.elem;\n    const widget = this.ctx.path?.widget;\n    if (!elem || !widget) {\n        return;\n    }\n    elem.classList.remove(\n        \"iedib-alerta-border\", \"iedib-important-border\", \"iedib-consell-border\",\n        \"iedib-introduccio-border\", \"iedib-ampliacio-border\");\n    elem.classList.add(\"iedib-\" + severity + \"-border\");\n    const lateral = elem.querySelector(\".iedib-lateral\");\n    lateral?.classList.remove(\"iedib-alerta\", \"iedib-important\", \"iedib-consell\", \"iedib-introduccio\", \"iedib-ampliacio\");\n    lateral?.classList.add(\"iedib-\" + severity);\n    const lang = elem.getAttribute(\"data-lang\") || \"ca\";\n    let langKey = \"msg_\" + severity;\n    // Change the lateral title\n    if (widget.I18n?.[langKey]?.[lang]) {\n        const titolLateral = lateral?.querySelector('.iedib-titolLateral');\n        if (titolLateral) {\n            titolLateral.innerHTML = widget.I18n[langKey][lang];\n        }\n    }\n\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext}}\n */\nexport function switchBoxSimpleExampleAction() {\n    const target = this.ctx.path?.elem;\n    const widget = this.ctx.path?.widget;\n    if (!target || !widget) {\n        return;\n    }\n    const lang = target.getAttribute(\"data-lang\") || \"ca\";\n    const solLabel = widget.I18n?.sol?.[lang] ?? 'Solució';\n    const formulacio = target.querySelector(\"div.iedib-formulacio-rows\");\n    const resolucio = target.querySelector(\"div.iedib-resolucio-rows\");\n    const solLabelHTML = resolucio?.querySelector('div.accordion') ? \"<p><b>\" + solLabel + \"</b>:</p>\" : \"\";\n    const lateralText = target.querySelector(\"p.iedib-titolLateral\")?.innerHTML ?? '';\n    const doc = this.ctx.editor.getDoc();\n    const newSnpt = htmlToElement(doc, `<div class=\"iedib-capsa iedib-capsa-gran iedib-exemple-border\" data-lang=\"${lang}\">\n        <div class=\"iedib-lateral iedib-exemple\">\n        <p class=\"iedib-titolLateral\">${lateralText}</span></p>\n        </div>\n        <div class=\"iedib-central\">\n        ${formulacio?.innerHTML ?? ''}\n        ${solLabelHTML}\n         ${resolucio?.innerHTML ?? ''}\n        '<br></div></div>`);\n    target.replaceWith(newSnpt);\n\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext}}\n */\nexport function switchBoxRowsExampleAction() {\n    const target = this.ctx.path?.elem;\n    if (!target) {\n        return;\n    }\n    const lang = target.getAttribute(\"data-lang\") || \"ca\";\n    const lateralText = target.querySelector(\"p.iedib-titolLateral\")?.innerHTML ?? '';\n    const formulacio = target.querySelector(\"div.span4.iedib-formulacio\");\n    const resolucio = target.querySelector(\"div.span8.iedib-resolucio > div.iedib-central\");\n    const doc = this.ctx.editor.getDoc();\n    const newSnpt = htmlToElement(doc, `<div class=\"iedib-capsa iedib-capsa-gran iedib-exemple-border\" data-lang=\"${lang}\">\n        <div class=\"iedib-lateral iedib-exemple\">\n        <p class=\"iedib-titolLateral\">${lateralText}</p>\n        </div>\n        <div class=\"iedib-formulacio-rows\">\n        ${formulacio?.innerHTML ?? ''}\n        </div>\n        <div class=\"iedib-resolucio-rows\">\n        ${resolucio?.innerHTML ?? ''}\n        </div></div>`);\n\n    target.replaceWith(newSnpt);\n\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext}}\n */\nexport function imageSwitchToSnippetAction() {\n    const target = this.ctx.path?.targetElement;\n    if (!target) {\n        return;\n    }\n    const doc = this.ctx.editor.getDoc();\n    const snpt = htmlToElement(doc, `<div class=\"iedib-figura iedib-grid-responsive\">\n        ${target.outerHTML}\n        <p class=\"iedib-img-footer\">Imatge: <em>Descripció</em>. Font: Wikimedia. Domini públic.</p>\n        </div>`);\n    target.replaceWith(snpt);\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext, colSpan: number}}\n */\nexport function changeColumnWidth() {\n    const colSpan = this.colSpan;\n    const target = this.ctx.path?.elem;\n    if (!target) {\n        return;\n    }\n    if (colSpan <= 0 || colSpan > 12) {\n        // Set to one column flow\n        const columns = target.querySelectorAll(\"div\");\n        columns.forEach(c => {\n            c.className = '';\n        });\n        target.replaceWith(...Array.from(columns));\n    } else {\n        // Define the spans\n        const first = target.querySelector(\"div:first-child\");\n        const last = target.querySelector(\"div:last-child\");\n        if (first) {\n            first.className = \"span\" + colSpan;\n        }\n        if (last) {\n            last.className = \"span\" + (12 - colSpan);\n        }\n    }\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext, isDependentBehavior: boolean}}\n */\nexport function setAccordionBehavior() {\n    const isDependentBehavior = this.isDependentBehavior;\n    const target = this.ctx.path?.elem;\n    if (!target) {\n        return;\n    }\n    if (isDependentBehavior) {\n        // Behavior individual\n        target.querySelectorAll(\"div.accordion-body\").forEach(e => {\n            e.removeAttribute(\"data-parent\");\n            e.removeAttribute(\"data-bs-parent\");\n        });\n    } else {\n        // Behavior accordion\n        const acid = target.id;\n        target.querySelectorAll(\"div.accordion-body\").forEach(e => {\n            e.setAttribute(\"data-parent\", \"#\" + acid);\n            e.setAttribute(\"data-bs-parent\", \"#\" + acid);\n        });\n    }\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext}}\n */\nexport function convert2BootstrapTable() {\n    const target = this.ctx.path?.elem;\n    if (!target) {\n        return;\n    }\n    target.classList.remove(\"iedib-table\");\n    target.classList.add(\"table\", \"table-striped\", \"iedib-bstable\");\n    target.removeAttribute('style');\n    target.removeAttribute('border');\n    target.querySelectorAll(\"td,th\").forEach(e => {\n        e.removeAttribute('style');\n        e.removeAttribute('data-mce-style');\n    });\n    target.querySelectorAll(\"thead > tr > th\").forEach(e => {\n        e.setAttribute(\"role\", \"col\");\n    });\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext}}\n */\nexport function convertDropdownToList() {\n    const target = this.ctx.path?.elem;\n    if (!target) {\n        return;\n    }\n    // Convert into a list\n    const doc = this.ctx.editor.dom.getDoc();\n    const listSubstitute = doc.createElement('UL');\n    target.querySelectorAll(\"a.accordion-toggle\").forEach(a => {\n          const href = a.getAttribute(\"href\");\n          if (!href) {\n            return;\n          }\n          const e = target.querySelector(href);\n          if (!e) {\n            return;\n          }\n          detachNode(e);\n          e.className = '';\n          const theLi = doc.createElement('LI');\n          theLi.append(a.innerHTML);\n          theLi.append(e);\n          listSubstitute.append(theLi);\n    });\n    target.replaceWith(listSubstitute);\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext}}\n */\nexport function convert2PrefefinedTable() {\n    const target = this.ctx.path?.elem;\n    if (!target) {\n        return;\n    }\n    target.classList.remove(\"table\", \"table-bordered\", \"table-hover\", \"table-striped\", \"table-responsive\", \"iedib-bstable\");\n    target.classList.add(\"iedib-table\");\n    target.setAttribute(\"style\", 'table-layout:fixed; border-collapse:collapse; border-spacing:0px; width:96%;');\n    target.setAttribute(\"data-mce-style\", target.getAttribute('style') ?? '');\n    /** @type {NodeListOf<HTMLElement>} */\n    const allTdTh = target.querySelectorAll(\"td,th\");\n    allTdTh.forEach(e => setStyleMCE(e, \"border\", '1px solid gray'));\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext}}\n */\nexport function toggleTableHeader() {\n    const target = this.ctx.path?.elem;\n    if (!target) {\n        return;\n    }\n    let head = target.querySelector(\"thead\");\n    if (head) {\n        // Remove head\n        head.remove();\n    } else {\n        // Create a head\n        const doc = this.ctx.editor.dom.getDoc();\n        head = doc.createElement('THEAD');\n        const tr = doc.createElement('TR');\n        const firstTr = target.querySelector(\"tr\");\n        if (firstTr) {\n            firstTr.querySelectorAll(\"td\").forEach(e => {\n                const newTh = htmlToElement(doc, '<th role=\"col\">Títol</th>');\n                const st = e.getAttribute(\"style\");\n                newTh.setAttribute(\"style\", st ? st : \"\");\n                newTh.setAttribute(\"data-mce-style\", st ? st : \"\");\n                tr.append(newTh);\n            });\n            if (head) {\n                head.append(tr);\n                target.prepend(head);\n            }\n        }\n    }\n}\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext}}\n */\nexport function toggleTableFooter() {\n    const target = this.ctx.path?.elem;\n    if (!target) {\n        return;\n    }\n    let foot = target.querySelector(\"tfoot\");\n    if (foot) {\n        // Remove the footer\n        foot.remove();\n    } else {\n        // Creates a footer\n        const doc = this.ctx.editor.dom.getDoc();\n        foot = doc.createElement(\"TFOOT\");\n        const tr2 = doc.createElement(\"TR\");\n        const firstTr = target.querySelector(\"tbody tr\");\n        if (firstTr) {\n            firstTr.querySelectorAll(\"td\").forEach(e => {\n                const newTd = htmlToElement(doc, \"<td>Resum</td>\");\n                const st =e.getAttribute(\"style\");\n                newTd.setAttribute(\"style\", st ? st : \"\");\n                newTd.setAttribute(\"data-mce-style\", st ? st : \"\");\n                tr2.append(newTd);\n            });\n            if (foot) {\n                foot.append(tr2);\n                target.append(foot);\n            }\n        }\n    }\n}\n\n\n/**\n * @this {{ctx: import(\"../contextinit\").ItemMenuContext}}\n */\nexport function toggleBootstapTableResponsiveness() {\n    const target = this.ctx.path?.elem;\n    if (!target) {\n        return;\n    }\n\n    if (target.parentElement?.classList?.contains(\"table-responsive\")) {\n        // Delete responsiveness\n       target.parentElement.replaceWith(target);\n    } else {\n        // Add responsiveness\n        const doc = this.ctx.editor.dom.getDoc();\n        const div = htmlToElement(doc, `<div class=\"table-responsive\">\n            ${target.outerHTML}\n            </div>`);\n        target.replaceWith(div);\n    }\n}\n\n"],"names":["ctx","this","type","elem","path","_ctx$path","setAttribute","editor","iso","_this$ctx$path","widget","_this$ctx$path2","lateral","querySelector","isTascaExercici","getAttribute","theType","langKey","key","forEach","ty","classList","contains","I18n","_I18n$langKey","h4","innerHTML","append","severity","_this$ctx$path5","_this$ctx$path6","remove","add","lang","_widget$I18n","_widget$I18n$langKey","titolLateral","_this$ctx$path3","_this$ctx$path4","size","colSpan","target","_this$ctx$path11","columns","querySelectorAll","c","className","replaceWith","Array","from","first","last","_this$ctx$path13","removeAttribute","e","_this$ctx$path15","_this$ctx$path14","doc","dom","getDoc","listSubstitute","createElement","a","href","el","parentNode","removeChild","detachNode","theLi","_this$ctx$path10","targetElement","snpt","outerHTML","_ctx$path2","_elem$getAttribute","startsWith","isDependentBehavior","_this$ctx$path12","acid","id","_this$ctx$path9","lateralText","formulacio","resolucio","newSnpt","_this$ctx$path7","_this$ctx$path8","solLabel","sol","solLabelHTML","_this$ctx$path18","parentElement","_target$parentElement","_target$parentElement2","div","_this$ctx$path17","foot","tr2","firstTr","newTd","st","_this$ctx$path16","head","tr","newTh","prepend"],"mappings":"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"}