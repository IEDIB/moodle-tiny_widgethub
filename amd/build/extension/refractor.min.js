define("tiny_widgethub/extension/refractor",["exports","../extension","../options"],(function(_exports,_extension,_options){function alphaWalker(body,query,attr,ishash,prefix,changesWorker){const all=body.querySelectorAll(query);let casos=0;return all.forEach((ele=>{let localChange=0,old=ele.getAttribute(attr)||"";ishash?("href"===attr&&(old="#"+old.split("#")[1]),RegExp(/^#\d/).exec(old)&&(ele.setAttribute(attr,"#"+prefix+old.substring(1)),localChange+=1)):RegExp(/^\d/).exec(old)&&(ele.setAttribute(attr,prefix+old),localChange+=1),localChange&&changesWorker&&changesWorker(ele),casos+=localChange})),casos}function changesWorker(ele){const newId=ele.getAttribute("id");ele.querySelectorAll('a.accordion-toggle[data-toggle="collapse"],a.accordion-toggle[data-bs-toggle="collapse"]').forEach((asel=>{asel.setAttribute("data-parent","#"+newId),asel.setAttribute("data-bs-parent","#"+newId)}))}function idFixingRefractor(editor){let casos=0;const body=editor.getBody();try{casos+=alphaWalker(body,".accordion.iedib-accordion","id",!1,"f_",changesWorker);const casos2=alphaWalker(body,"ul.nav.nav-tabs>li>a","href",!0,"f_");casos2>0&&(casos+=casos2+alphaWalker(body,".tab-pane.iedib-tabpane","id",!1,"f_"))}catch(ex){console.error(ex)}return casos>0}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.idFixingRefractor=idFixingRefractor;const bs4DataAttributeSuffixes=["toggle","target","parent","placement","trigger","content","container","original-title","html"],bs5Selectors=bs4DataAttributeSuffixes.map((suffix=>`[data-${suffix}]`)).join(",");(0,_extension.subscribe)("onInit",(function(editor){if("1"!==(0,_options.getGlobalConfig)(editor,"oninit.refractoring","1"))return void console.info("Skipping refractoring");const changes1=idFixingRefractor(editor),changes2=function(editor){const body=editor.getBody();let changes=0;return body.querySelectorAll(bs5Selectors).forEach((element=>{bs4DataAttributeSuffixes.forEach((kebabCaseSuffix=>{const oldAttrName=`data-${kebabCaseSuffix}`;if(element.hasAttribute(oldAttrName)){const attrValue=element.getAttribute(oldAttrName),newAttrName=`data-bs-${kebabCaseSuffix}`;null!==attrValue?element.getAttribute(newAttrName)!==attrValue&&(element.setAttribute(newAttrName,attrValue),changes++):(element.removeAttribute(newAttrName),changes++)}}))})),changes>0}(editor);(changes1||changes2)&&editor.notificationManager.open({text:"S'han optimitzat alguns snippets. Per favor, desau els canvis en sortir.",type:"warning",timeout:4e3})}))}));

//# sourceMappingURL=refractor.min.js.map