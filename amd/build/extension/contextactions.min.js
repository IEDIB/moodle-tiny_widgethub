define("tiny_ibwidgethub/extension/contextactions",["exports","../util","./dependencies"],(function(_exports,_util,_dependencies){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.addImageEffectAction=function(){var _ctx$path;const ctx=this.ctx,type=this.type,elem=null===(_ctx$path=ctx.path)||void 0===_ctx$path?void 0:_ctx$path.elem;if(!elem)return;elem.setAttribute("data-snptd",type),(0,_dependencies.addRequires)(ctx.editor,["/sd/images.min.js"])},_exports.changeBoxLangAction=function(){var _this$ctx$path,_this$ctx$path2,_I18n$langKey;const iso=this.iso,elem=null===(_this$ctx$path=this.ctx.path)||void 0===_this$ctx$path?void 0:_this$ctx$path.elem,widget=null===(_this$ctx$path2=this.ctx.path)||void 0===_this$ctx$path2?void 0:_this$ctx$path2.widget;if(!elem||!widget)return;const lateral=elem.querySelector(".iedib-titolLateral"),isTascaExercici=elem.getAttribute("data-proposat")||elem.querySelector(".iedib-tasca.iedib-central");let theType,langKey="msg";isTascaExercici?langKey=elem.querySelector(".iedib-tasca.iedib-proposat")?"msg_epr":"msg_"+(elem.getAttribute("data-proposat")??"tapr"):"capsa-generica"===widget.key&&(["alerta","ampliacio","consell","important","introduccio"].forEach((ty=>{elem.classList.contains("iedib-"+ty+"-border")&&(theType=ty)})),langKey="msg_"+theType);const I18n=widget.I18n;if(null!=I18n&&null!==(_I18n$langKey=I18n[langKey])&&void 0!==_I18n$langKey&&_I18n$langKey[iso])if(isTascaExercici){const h4=elem.querySelector(".iedib-central h4");h4&&(h4.innerHTML=I18n[langKey][iso]+":")}else lateral&&(lateral.innerHTML=I18n[langKey][iso],theType&&lateral.append('<span class="iedib-'+theType+'-logo"></span>'));elem.setAttribute("data-lang",iso)},_exports.changeBoxSeverityAction=function(){var _this$ctx$path5,_this$ctx$path6,_widget$I18n,_widget$I18n$langKey;const severity=this.severity,elem=null===(_this$ctx$path5=this.ctx.path)||void 0===_this$ctx$path5?void 0:_this$ctx$path5.elem,widget=null===(_this$ctx$path6=this.ctx.path)||void 0===_this$ctx$path6?void 0:_this$ctx$path6.widget;if(!elem||!widget)return;elem.classList.remove("iedib-alerta-border","iedib-important-border","iedib-consell-border","iedib-introduccio-border","iedib-ampliacio-border"),elem.classList.add("iedib-"+severity+"-border");const lateral=elem.querySelector(".iedib-lateral");null==lateral||lateral.classList.remove("iedib-alerta","iedib-important","iedib-consell","iedib-introduccio","iedib-ampliacio"),null==lateral||lateral.classList.add("iedib-"+severity);const lang=elem.getAttribute("data-lang")||"ca";let langKey="msg_"+severity;if(null!==(_widget$I18n=widget.I18n)&&void 0!==_widget$I18n&&null!==(_widget$I18n$langKey=_widget$I18n[langKey])&&void 0!==_widget$I18n$langKey&&_widget$I18n$langKey[lang]){const titolLateral=null==lateral?void 0:lateral.querySelector(".iedib-titolLateral");titolLateral&&(titolLateral.innerHTML=widget.I18n[langKey][lang])}},_exports.changeBoxSizeAction=function(){var _this$ctx$path3,_this$ctx$path4;const elem=null===(_this$ctx$path3=this.ctx.path)||void 0===_this$ctx$path3?void 0:_this$ctx$path3.elem,widget=null===(_this$ctx$path4=this.ctx.path)||void 0===_this$ctx$path4?void 0:_this$ctx$path4.widget;if(!elem||!widget)return;elem.classList.remove("iedib-capsa-petita","iedib-capsa-mitjana","iedib-capsa-gran"),elem.classList.add("iedib-capsa-"+this.size)},_exports.changeColumnWidth=function(){var _this$ctx$path11;const colSpan=this.colSpan,target=null===(_this$ctx$path11=this.ctx.path)||void 0===_this$ctx$path11?void 0:_this$ctx$path11.elem;if(!target)return;if(colSpan<=0||colSpan>12){const columns=target.querySelectorAll("div");columns.forEach((c=>{c.className=""})),target.replaceWith(...Array.from(columns))}else{const first=target.querySelector("div:first-child"),last=target.querySelector("div:last-child");first&&(first.className="span"+colSpan),last&&(last.className="span"+(12-colSpan))}},_exports.convert2BootstrapTable=function(){var _this$ctx$path13;const target=null===(_this$ctx$path13=this.ctx.path)||void 0===_this$ctx$path13?void 0:_this$ctx$path13.elem;if(!target)return;target.classList.remove("iedib-table"),target.classList.add("table","table-striped","iedib-bstable"),target.removeAttribute("style"),target.removeAttribute("border"),target.querySelectorAll("td,th").forEach((e=>{e.removeAttribute("style"),e.removeAttribute("data-mce-style")})),target.querySelectorAll("thead > tr > th").forEach((e=>{e.setAttribute("role","col")}))},_exports.convert2PrefefinedTable=function(){var _this$ctx$path15;const target=null===(_this$ctx$path15=this.ctx.path)||void 0===_this$ctx$path15?void 0:_this$ctx$path15.elem;if(!target)return;target.classList.remove("table","table-bordered","table-hover","table-striped","table-responsive","iedib-bstable"),target.classList.add("iedib-table"),target.setAttribute("style","table-layout:fixed; border-collapse:collapse; border-spacing:0px; width:96%;"),target.setAttribute("data-mce-style",target.getAttribute("style")??"");target.querySelectorAll("td,th").forEach((e=>(0,_util.setStyleMCE)(e,"border","1px solid gray")))},_exports.convertDropdownToList=function(){var _this$ctx$path14;const target=null===(_this$ctx$path14=this.ctx.path)||void 0===_this$ctx$path14?void 0:_this$ctx$path14.elem;if(!target)return;const doc=this.ctx.editor.dom.getDoc(),listSubstitute=doc.createElement("UL");target.querySelectorAll("a.accordion-toggle").forEach((a=>{const href=a.getAttribute("href");if(!href)return;const e=target.querySelector(href);if(!e)return;!
/**
   * Tiny WidgetHub plugin.
   *
   * @module      tiny_ibwidgethub/plugin
   * @copyright   2024 Josep Mulet Pol <pep.mulet@gmail.com>
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
function(el){el&&el.parentNode&&el.parentNode.removeChild(el)}(e),e.className="";const theLi=doc.createElement("LI");theLi.append(a.innerHTML),theLi.append(e),listSubstitute.append(theLi)})),target.replaceWith(listSubstitute)},_exports.imageSwitchToSnippetAction=function(){var _this$ctx$path10;const target=null===(_this$ctx$path10=this.ctx.path)||void 0===_this$ctx$path10?void 0:_this$ctx$path10.targetElement;if(!target)return;const doc=this.ctx.editor.getDoc(),snpt=(0,_util.htmlToElement)(doc,`<div class="iedib-figura iedib-grid-responsive">\n        ${target.outerHTML}\n        <p class="iedib-img-footer">Imatge: <em>Descripció</em>. Font: Wikimedia. Domini públic.</p>\n        </div>`);target.replaceWith(snpt)},_exports.removeImageEffectsAction=function(){var _ctx$path2,_elem$getAttribute;const ctx=this.ctx,elem=null===(_ctx$path2=ctx.path)||void 0===_ctx$path2?void 0:_ctx$path2.elem;if(!elem)return;elem.removeAttribute("data-snptd"),null!==(_elem$getAttribute=elem.getAttribute("role"))&&void 0!==_elem$getAttribute&&_elem$getAttribute.startsWith("snptd_")&&elem.removeAttribute("role");(0,_dependencies.cleanUnusedRequires)(ctx.editor)},_exports.setAccordionBehavior=function(){var _this$ctx$path12;const isDependentBehavior=this.isDependentBehavior,target=null===(_this$ctx$path12=this.ctx.path)||void 0===_this$ctx$path12?void 0:_this$ctx$path12.elem;if(!target)return;if(isDependentBehavior)target.querySelectorAll("div.accordion-body").forEach((e=>{e.removeAttribute("data-parent"),e.removeAttribute("data-bs-parent")}));else{const acid=target.id;target.querySelectorAll("div.accordion-body").forEach((e=>{e.setAttribute("data-parent","#"+acid),e.setAttribute("data-bs-parent","#"+acid)}))}},_exports.switchBoxRowsExampleAction=function(){var _this$ctx$path9,_target$querySelector2;const target=null===(_this$ctx$path9=this.ctx.path)||void 0===_this$ctx$path9?void 0:_this$ctx$path9.elem;if(!target)return;const lang=target.getAttribute("data-lang")||"ca",lateralText=(null===(_target$querySelector2=target.querySelector("p.iedib-titolLateral"))||void 0===_target$querySelector2?void 0:_target$querySelector2.innerHTML)??"",formulacio=target.querySelector("div.span4.iedib-formulacio"),resolucio=target.querySelector("div.span8.iedib-resolucio > div.iedib-central"),doc=this.ctx.editor.getDoc(),newSnpt=(0,_util.htmlToElement)(doc,`<div class="iedib-capsa iedib-capsa-gran iedib-exemple-border" data-lang="${lang}">\n        <div class="iedib-lateral iedib-exemple">\n        <p class="iedib-titolLateral">${lateralText}</p>\n        </div>\n        <div class="iedib-formulacio-rows">\n        ${(null==formulacio?void 0:formulacio.innerHTML)??""}\n        </div>\n        <div class="iedib-resolucio-rows">\n        ${(null==resolucio?void 0:resolucio.innerHTML)??""}\n        </div></div>`);target.replaceWith(newSnpt)},_exports.switchBoxSimpleExampleAction=function(){var _this$ctx$path7,_this$ctx$path8,_widget$I18n2,_widget$I18n2$sol,_target$querySelector;const target=null===(_this$ctx$path7=this.ctx.path)||void 0===_this$ctx$path7?void 0:_this$ctx$path7.elem,widget=null===(_this$ctx$path8=this.ctx.path)||void 0===_this$ctx$path8?void 0:_this$ctx$path8.widget;if(!target||!widget)return;const lang=target.getAttribute("data-lang")||"ca",solLabel=(null===(_widget$I18n2=widget.I18n)||void 0===_widget$I18n2||null===(_widget$I18n2$sol=_widget$I18n2.sol)||void 0===_widget$I18n2$sol?void 0:_widget$I18n2$sol[lang])??"Solució",formulacio=target.querySelector("div.iedib-formulacio-rows"),resolucio=target.querySelector("div.iedib-resolucio-rows"),solLabelHTML=null!=resolucio&&resolucio.querySelector("div.accordion")?"<p><b>"+solLabel+"</b>:</p>":"",lateralText=(null===(_target$querySelector=target.querySelector("p.iedib-titolLateral"))||void 0===_target$querySelector?void 0:_target$querySelector.innerHTML)??"",doc=this.ctx.editor.getDoc(),newSnpt=(0,_util.htmlToElement)(doc,`<div class="iedib-capsa iedib-capsa-gran iedib-exemple-border" data-lang="${lang}">\n        <div class="iedib-lateral iedib-exemple">\n        <p class="iedib-titolLateral">${lateralText}</span></p>\n        </div>\n        <div class="iedib-central">\n        ${(null==formulacio?void 0:formulacio.innerHTML)??""}\n        ${solLabelHTML}\n         ${(null==resolucio?void 0:resolucio.innerHTML)??""}\n        '<br></div></div>`);target.replaceWith(newSnpt)},_exports.toggleBootstapTableResponsiveness=function(){var _this$ctx$path18,_target$parentElement,_target$parentElement2;const target=null===(_this$ctx$path18=this.ctx.path)||void 0===_this$ctx$path18?void 0:_this$ctx$path18.elem;if(!target)return;if(null!==(_target$parentElement=target.parentElement)&&void 0!==_target$parentElement&&null!==(_target$parentElement2=_target$parentElement.classList)&&void 0!==_target$parentElement2&&_target$parentElement2.contains("table-responsive"))target.parentElement.replaceWith(target);else{const doc=this.ctx.editor.dom.getDoc(),div=(0,_util.htmlToElement)(doc,`<div class="table-responsive">\n            ${target.outerHTML}\n            </div>`);target.replaceWith(div)}},_exports.toggleTableFooter=function(){var _this$ctx$path17;const target=null===(_this$ctx$path17=this.ctx.path)||void 0===_this$ctx$path17?void 0:_this$ctx$path17.elem;if(!target)return;let foot=target.querySelector("tfoot");if(foot)foot.remove();else{const doc=this.ctx.editor.dom.getDoc();foot=doc.createElement("TFOOT");const tr2=doc.createElement("TR"),firstTr=target.querySelector("tbody tr");firstTr&&(firstTr.querySelectorAll("td").forEach((e=>{const newTd=(0,_util.htmlToElement)(doc,"<td>Resum</td>"),st=e.getAttribute("style");newTd.setAttribute("style",st||""),newTd.setAttribute("data-mce-style",st||""),tr2.append(newTd)})),foot&&(foot.append(tr2),target.append(foot)))}},_exports.toggleTableHeader=function(){var _this$ctx$path16;const target=null===(_this$ctx$path16=this.ctx.path)||void 0===_this$ctx$path16?void 0:_this$ctx$path16.elem;if(!target)return;let head=target.querySelector("thead");if(head)head.remove();else{const doc=this.ctx.editor.dom.getDoc();head=doc.createElement("THEAD");const tr=doc.createElement("TR"),firstTr=target.querySelector("tr");firstTr&&(firstTr.querySelectorAll("td").forEach((e=>{const newTh=(0,_util.htmlToElement)(doc,'<th role="col">Títol</th>'),st=e.getAttribute("style");newTh.setAttribute("style",st||""),newTh.setAttribute("data-mce-style",st||""),tr.append(newTh)})),head&&(head.append(tr),target.prepend(head)))}}}));

//# sourceMappingURL=contextactions.min.js.map